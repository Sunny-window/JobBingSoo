<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style>


.container {
	width: 500px;
	margin: 0 auto;
}

ul.tabs {
	text-align:center;
	margin-bottom:30px;
}

ul.tabs li {
	background: none;
	color: #222;
	display: inline-block;
	padding:0px 10px;
	cursor: pointer;
}
.tabs .line{
	color:#333;
}

ul.tabs li.current {
	color:#d44958;
	font-weight:bold;
}

.tab-content {
	display: none;
	padding: 15px;
}

.tab-content.current {
	display: block;
}


.hidden {
        display: none;
    }
    
    
    
    
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
        padding: 0;
        background-color: #f4f4f9;
    }
    h1 {
        color: #333;
    }
    button {
        background-color: #007BFF;
        color: white;
        border: none;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 10px 2px;
        cursor: pointer;
        border-radius: 4px;
    }
    button:hover {
        background-color: #0056b3;
    }
    .hidden {
        display: none;
    }
    #infoDiv, #showResumeList, #subscribeListDiv, #showFavoriteListDiv, #totalResult {
        margin-top: 20px;
        padding: 20px;
        border-radius: 8px;
    }
    input[type="text"] {
        width: calc(100% - 22px);
        padding: 10px;
        margin: 5px 0;
        box-sizing: border-box;
        border: 2px solid #ccc;
        border-radius: 4px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    table, th, td {
        border: 1px solid #ddd;
    }
    th, td {
        padding: 15px;
        text-align: left;
    }
    th {
        background-color: #f2f2f2;
    }
    
    
</style>

<script src="https://code.jquery.com/jquery-3.7.1.js"
	integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
	crossorigin="anonymous"></script>
</head>

<body>
<h1>my page</h1>
<button id ="infoBtn" >정보수정</button><br>
<button id ="resumeManage" onclick ="showResumeList(event)" >이력서관리</button><br>
<button id = "showSubscribeFavoriteList" onclick ="">관심기업/스크랩공고</button><br>
<button id = "" onclick ="">내글목록</button><br>
<button id = "" onclick ="">나의 문의내역</button><br>


<div id = totalResult></div>

</body>
<script>
$(document).ready(function() {
    var infoFormVisible = false; // 초기 상태는 숨겨진 상태로 설정

    $("#infoBtn").click(function() {
        if (infoFormVisible) {
            $("#totalResult").empty(); // 내용을 지웁니다.
            infoFormVisible = false; // 상태 변경
        } else {
            var htmlContent = `
                <div>
                    기본키 <input type="text" id="rb_code" name="rb_code" ><br>
                    이름 <input type="text" id="name" name="name" ><br>
                    생일 <input type="text" id="birth" name="birth" ><br>
                    전화 <input type="text" id="tel" name="tel" ><br>
                    주소 <input type="text" id="address" name="address" ><br>
                    메일 <input type="text" id="email" name="email" ><br>
                    성별 <input type="text" id="gender" name="gender" ><br>
                    필/미필 <input type="text" id="military" name="military" ><br>
                    <button id="updateInfo" onclick="updateInfo(event)">수정하기</button>
                    <div id="resultUpdateInfo"></div>
                </div>
            `;
            $("#totalResult").html(htmlContent);
            infoFormVisible = true; // 상태 변경
        }
    });
});

function showResumeList(event){
	event.preventDefault();
	
	console.log("=============");
    fetch("http://localhost:9001/showResumeList", { // 서버에 요청을 보냅니다.
        method: "GET",
        headers: {
            "Content-Type": "application/json" // 요청의 헤더 설정
        },
    })
        .then(response => response.json())
        .then(data => {
            document.getElementById("totalResult").innerHTML = createResumeTable(data);
            /* approvalBtn.innerHTML = data; // 버튼의 내용을 변경합니다.*/
        })
        .catch(error => {
            document.getElementById("totalResult").innerHTML = error;
        });
}

function createResumeTable(jsonData) {
    var html = '<table border="1">';
    // 헤더 추가
    html += '<tr>';
    html += '<th>title</th>';
    html += '<th>수정</th>';
    html += '<th>삭제</th>';
    html += '</tr>';
    
    // 데이터 추가
    jsonData.forEach(item => {
        html += '<tr>';
        html += '<input id = "resume_code" type="hidden" value='+item.resume_code+'>';
        html += '<td id ="resumeDetailTd" onclick ="showResumeDetail(event)">' + item.title + '</td>'; // 각 객체의 title 속성 접근
        html += '<td id ="resumeUpdateBtn" > 수정</td>'; // 각 객체의 title 속성 접근
        html += '<td> 삭제</td>'; // 각 객체의 title 속성 접근
        html += '</tr>';
    });

    html += '</table>';
    
    return html;
}
function resumeUpdateInfo(event){
	event.preventDefault();
	var rb_code = document.querySelector('input[id="rb_code"]').value;
	
	  const member = {
			  rb_code:rb_code,
			
		    }
	console.log("============= member");
	const sendData = JSON.stringify(member);
    fetch("http://localhost:9001/resumeUpdate", { // 서버에 요청을 보냅니다.
        method: "PUT",
        headers: {
            "Content-Type": "application/json" // 요청의 헤더 설정
        },
        body: sendData // 전송할 데이터
    })
        .then(response => response.text())
        .then(data => {
            document.getElementById("totalResult").innerHTML = data;
            /* approvalBtn.innerHTML = data; // 버튼의 내용을 변경합니다.*/
        })
        .catch(error => {
            document.getElementById("totalResult").innerHTML = error;
        });
}

</script>
</html>